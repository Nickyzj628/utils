// @bun
var q=(...f)=>{console.log(`${new Date().toLocaleTimeString()}`,...f)};var T=(f,$=-1)=>{let x=new Map,W=(...D)=>{let H=JSON.stringify(D),I=Date.now(),M=x.get(H);if(M&&I<M.expiresAt)return M.value;let C=$===-1?1/0:I+$*1000,Q={setTtl:(X)=>{C=I+X*1000}},Y=f.apply(Q,D);if(Y instanceof Promise){let X=Y.then((Z)=>{return x.set(H,{value:Z,expiresAt:C}),Z});return x.set(H,{value:X,expiresAt:C}),X}return x.set(H,{value:Y,expiresAt:C}),Y};return W.clear=()=>x.clear(),W.updateTtl=(D)=>{$=D;let H=Date.now(),I=H+D*1000;for(let[M,C]of x.entries())if(C.expiresAt>H)C.expiresAt=I,x.set(M,C)},W};var J=(f)=>{return f?.constructor===Object},_=(f)=>{return f===null||f===void 0||typeof f!=="object"&&typeof f!=="function"},F=(f)=>{return!f},B=(f)=>{return f===null||f===void 0};var z=(f,$)=>{let x={...f};for(let W of Object.keys($)){let D=x[W],H=$[W];if(_(D)&&_(H)){x[W]=H;continue}if(Array.isArray(D)&&Array.isArray(H)){x[W]=D.concat(H);continue}if(J(D)&&J(H)){x[W]=z(D,H);continue}x[W]=H}return x},G=(f,$)=>{if(Array.isArray(f))return f.map((x)=>G(x,$));if(J(f))return Object.keys(f).reduce((W,D)=>{let H=$(D),I=f[D];return W[H]=G(I,$),W},{});return f},P=(f,$)=>{if(Array.isArray(f))return f.map((x,W)=>{if(J(x))return P(x,$);return $(x,W)});if(J(f))return Object.keys(f).reduce((W,D)=>{let H=f[D];if(J(H)||Array.isArray(H))W[D]=P(H,$);else W[D]=$(H,D);return W},{});return f};var V=(f="",$={})=>{let x=async(W,D={})=>{let H=new URL(f?`${f}${W}`:W),{params:I,parser:M,...C}=z($,D);if(J(I))Object.entries(I).forEach(([X,Z])=>{if(B(Z))return;H.searchParams.append(X,Z.toString())});if(J(C.body))C.body=JSON.stringify(C.body),C.headers={...C.headers,"Content-Type":"application/json"};let Q=await fetch(H,C);if(!Q.ok)throw Error(Q.statusText);return await(M?.(Q)??Q.json())};return{get:(W,D)=>x(W,{...D,method:"GET"}),post:(W,D,H)=>x(W,{...H,method:"POST",body:D}),put:(W,D,H)=>x(W,{...H,method:"PUT",body:D}),delete:(W,D)=>x(W,{...D,method:"DELETE"})}},m=async(f)=>{try{return[null,await f]}catch($){return[$,void 0]}};var N=(f)=>{return f.replace(/_([a-zA-Z])/g,($,x)=>x.toUpperCase())},g=(f)=>{return f.replace(/([A-Z])/g,($,x)=>`_${x.toLowerCase()}`)},h=(f)=>{return f.charAt(0).toUpperCase()+f.slice(1)},k=(f)=>{return f.charAt(0).toLowerCase()+f.slice(1)};var d=async(f=150)=>{return new Promise(($)=>{setTimeout($,f)})};export{T as withCache,m as to,q as timeLog,N as snakeToCamel,d as sleep,z as mergeObjects,P as mapValues,G as mapKeys,_ as isPrimitive,J as isObject,B as isNil,F as isFalsy,V as fetcher,k as decapitalize,h as capitalize,g as camelToSnake};
