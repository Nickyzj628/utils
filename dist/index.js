// @bun
var j=(...c)=>{console.log(`${new Date().toLocaleTimeString()}`,...c)};var l=(c)=>{return c?.constructor===Object};class v{cache;maxSize;constructor(c=10){this.cache=new Map,this.maxSize=c}get(c){let h=this.cache.get(c);if(!h)return;return this.cache.delete(c),this.cache.set(c,h),h}set(c,h){if(this.cache.has(c))this.cache.delete(c);else if(this.cache.size>=this.maxSize){let e=[...this.cache.keys()][0];if(e)this.cache.delete(e)}this.cache.set(c,h)}has(c){return this.cache.has(c)}}var d=v;var z=new d,T=(c="")=>{let h=async(e,a={})=>{let f=c?`${c}${e}`:e;if(l(a.body))a.body=JSON.stringify(a.body),a.headers={...a.headers,"Content-Type":"application/json"};let K=()=>fetch(f,a),g;if(!(a.method==="GET"||!a.method))g=K();else{let x=z.get(f);if(!x)x=K(),z.set(f,x);g=x}let t=(await g).clone();if(!t.ok)throw Error(t.statusText);return await t.json()};return{get:(e,a={})=>h(e,{...a,method:"GET"}),post:(e,a,f={})=>h(e,{...f,method:"POST",body:a}),put:(e,a,f={})=>h(e,{...f,method:"PUT",body:a}),delete:(e,a={})=>h(e,{...a,method:"DELETE"})}},$=async(c)=>{try{return[null,await c]}catch(h){return[h,void 0]}};export{$ as to,j as timeLog,l as isObject,T as fetcher};
